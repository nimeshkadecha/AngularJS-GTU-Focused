<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Portfolio</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      :root {
        --mouseX: 50%;
        --mouseY: 50%;
        --primary: #2563eb;
        --secondary: #1e293b;
        --accent: #06b6d4;
        --light: #f8fafc;
        --dark: #0f172a;
        --text: #334155;
      }

      body {
        background: radial-gradient(
            circle at var(--mouseX) var(--mouseY),
            rgba(6, 182, 212, 0.15),
            transparent 80%
          ),
          linear-gradient(to right, #f1f5f9, #e2e8f0);
        background-repeat: no-repeat;
        background-attachment: fixed;
        color: var(--text);
        font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
      }

      /* Hero section styling - using Bootstrap classes with custom gradients */
      .hero {
        background: linear-gradient(135deg, var(--secondary), var(--dark));
      }

      .hero::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
          circle at 50% 50%,
          rgba(6, 182, 212, 0.2) 0%,
          transparent 50%
        );
      }

      /* Section headings - keeping custom underline effect */
      h2 {
        color: var(--secondary);
        position: relative;
      }

      h2::after {
        content: "";
        position: absolute;
        left: 0;
        bottom: 0;
        height: 3px;
        width: 80px;
        background: var(--accent);
      }

      /* Animation - Bootstrap doesn't have equivalent */
      @keyframes fadeInUp {
        from {
          transform: translateY(30px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .fadeInUp {
        animation: fadeInUp 0.6s ease-out forwards;
      }

      .stagger-item {
        opacity: 0;
      }

      /* Hero image styling */
      .hero-image-container {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        overflow: hidden;
        margin: 0 auto 1.5rem;
        border: 3px solid rgba(255, 255, 255, 0.2);
      }

      .hero-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      
      /* Social links styling */
      .social-links {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
        justify-content: center;
      }

      .social-links a {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: rgba(255, 255, 255, 0.15);
        color: var(--light);
        transition: all 0.3s ease;
        backdrop-filter: blur(2px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .social-links a:hover {
        background-color: var(--accent);
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .social-links svg {
        width: 20px;
        height: 20px;
      }

      /* Card styling - using Bootstrap base with custom accents */
      .card {
        transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        border: none;
        border-left: 4px solid var(--primary);
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        background-color: var(--light);
        border-radius: 8px;
        margin-bottom: 1.5rem;
        overflow: hidden;
      }

      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      }

      .card-projects {
        transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        height: 100%;
        border-left: 4px solid var(--accent);
        background-color: var(--light);
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        margin-bottom: 0;
        display: flex;
        flex-direction: column;
      }

      .card-projects:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      }

      /* Project content */
      .project-content {
        padding: 1.5rem;
        flex: 1;
        display: flex;
        flex-direction: column;
      }

      .project-title {
        font-size: 1.25rem;
        margin-top: 0.5rem;
        margin-bottom: 0.5rem;
        color: var(--secondary);
        font-weight: bold;
      }

      /* Project carousel */
      .project-carousel {
        position: relative;
        overflow: hidden;
        aspect-ratio: 16/9;
        max-height: 200px;
        background-color: rgba(0, 0, 0, 0.04);
      }

      .project-carousel-inner {
        display: flex;
        transition: transform 0.5s ease;
        height: 100%;
      }

      .project-carousel-item {
        min-width: 100%;
        flex: 0 0 100%;
        height: 100%;
      }

      .project-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .carousel-controls {
        position: absolute;
        bottom: 10px;
        left: 0;
        right: 0;
        display: flex;
        justify-content: center;
        gap: 0.25rem;
      }

      .carousel-indicator {
        width: 8px;
        height: 8px;
        background-color: rgba(255, 255, 255, 0.5);
        border-radius: 50%;
        cursor: pointer;
      }

      .carousel-indicator.active {
        background-color: var(--light);
      }

      .carousel-prev,
      .carousel-next {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(0, 0, 0, 0.3);
        color: white;
        border: none;
        border-radius: 50%;
        width: 36px;
        height: 36px;
        font-size: 1.2rem;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .project-carousel:hover .carousel-prev,
      .project-carousel:hover .carousel-next {
        opacity: 1;
      }

      .carousel-prev {
        left: 10px;
      }

      .carousel-next {
        right: 10px;
      }

      /* Tech badges */
      .tech-badges {
        margin-bottom: 0.75rem;
      }
      
      .tech-badge {
        display: inline-block;
        background-color: var(--accent);
        color: var(--light);
        border-radius: 4px;
        font-size: 0.8rem;
        padding: 0.35rem 0.5rem;
        margin-right: 0.5rem;
        margin-bottom: 0.5rem;
      }

      /* Project description */
      .project-description {
        margin-top: auto;
      }

      /* GitHub button */
      .github-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        background-color: var(--dark);
        color: var(--light);
        text-decoration: none;
        border-radius: 0.25rem;
        transition: all 0.2s ease;
        width: fit-content;
        padding: 0.5rem 0.75rem;
        font-size: 0.9rem;
        margin-top: 1rem;
      }

      .github-btn:hover {
        background-color: var(--accent);
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .github-btn svg {
        width: 16px;
        height: 16px;
      }

      /* Projects grid */
      .projects-grid {
        display: grid;
        grid-template-columns: repeat(1, 1fr);
        gap: 1.5rem;
      }

      @media (min-width: 768px) {
        .projects-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (min-width: 992px) {
        .projects-grid {
          grid-template-columns: repeat(3, 1fr);
        }
      }

      /* Certificate styling */
      .certifications-grid {
        display: grid;
        grid-template-columns: repeat(1, 1fr);
        gap: 1.5rem;
      }

      @media (min-width: 768px) {
        .certifications-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (min-width: 992px) {
        .certifications-grid {
          grid-template-columns: repeat(3, 1fr);
        }
      }

      .cert-card {
        background-color: var(--light);
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        height: 100%;
        border-left: 4px solid var(--primary);
      }

      .cert-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      }

      .cert-image-container {
        position: relative;
        width: 100%;
        padding-top: 56.25%; /* 16:9 Aspect Ratio */
        overflow: hidden;
        background-color: rgba(0, 0, 0, 0.04);
        max-height: 180px;
      }

      .cert-image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: contain;
      }

      .cert-placeholder-icon {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 30%;
        height: 30%;
        opacity: 0.3;
      }

      .cert-content {
        padding: 1.25rem;
      }

      .cert-title {
        font-size: 1.15rem;
        font-weight: bold;
        color: var(--secondary);
        margin-bottom: 0.5rem;
      }

      .cert-issuer {
        font-size: 0.9rem;
        color: var(--text);
        opacity: 0.8;
        margin-bottom: 0.5rem;
      }

      .cert-date {
        font-size: 0.85rem;
        color: var(--accent);
        font-weight: 500;
      }

      /* Skills styling */
      .skills-grid {
        display: grid;
        grid-template-columns: repeat(1, 1fr);
        gap: 1.25rem;
      }

      @media (min-width: 768px) {
        .skills-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      .skill-item {
        background-color: var(--light);
        border-radius: 8px;
        padding: 1rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        border-left: 3px solid var(--accent);
      }

      .skill-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.5rem;
        align-items: center;
      }

      .skill-name {
        font-weight: 600;
        color: var(--secondary);
      }

      .skill-level {
        font-size: 0.85rem;
        color: var(--text);
        opacity: 0.8;
        font-weight: 500;
      }

      /* Skill progress bars */
      .skill-bar {
        height: 8px;
        background-color: rgba(0, 0, 0, 0.05);
        border-radius: 4px;
        overflow: hidden;
        margin-top: 0.5rem;
      }

      .skill-progress {
        height: 100%;
        border-radius: 4px;
        width: 0;
        transition: width 1s ease-out;
      }

      .skill-progress.beginner {
        background-color: #38bdf8;
        width: 25%;
      }

      .skill-progress.intermediate {
        background-color: #22d3ee;
        width: 50%;
      }

      .skill-progress.advanced {
        background-color: #06b6d4;
        width: 85%;
      }

      .skill-progress.expert {
        background-color: #0284c7;
        width: 100%;
      }

      /* Education styling */
      .education-grid {
        display: grid;
        grid-template-columns: repeat(1, 1fr);
        gap: 1.25rem;
      }

      @media (min-width: 768px) {
        .education-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      .education-card {
        background-color: var(--light);
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        height: 100%;
        display: flex;
        border-left: 4px solid var(--secondary);
      }

      .education-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      }

      /* Education logo */
      .education-logo {
        width: 70px;
        height: 70px;
        min-width: 70px;
        margin: 1.25rem 0 1.25rem 1.25rem;
        background-color: rgba(37, 99, 235, 0.1);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--primary);
        font-size: 1.5rem;
        font-weight: bold;
      }

      .education-logo img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        border-radius: 50%;
      }

      .education-content {
        padding: 1.25rem;
        flex: 1;
      }

      .education-degree {
        font-size: 1.15rem;
        font-weight: bold;
        color: var(--secondary);
        margin-bottom: 0.4rem;
      }

      .education-institution {
        font-size: 0.95rem;
        color: var(--text);
        margin-bottom: 0.4rem;
      }

      .education-date {
        font-size: 0.85rem;
        color: var(--accent);
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 0.35rem;
      }

      .education-date svg {
        width: 0.9rem;
        height: 0.9rem;
      }

      .education-location {
        font-size: 0.85rem;
        color: var(--text);
        opacity: 0.7;
        margin-top: 0.3rem;
        display: flex;
        align-items: center;
        gap: 0.35rem;
      }

      .education-location svg {
        width: 0.9rem;
        height: 0.9rem;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">My Portfolio</a>
      </div>
    </nav>

    <div class="hero py-5 text-center position-relative overflow-hidden text-light">
      <div class="container">
        <!-- Content will be dynamically populated -->
      </div>
    </div>

    <div class="container my-5">
      <div class="row">
        <div class="col-12" id="dynamicContent"></div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="data.js"></script>
    <script>
      // Improved mouse tracking with throttling
      let lastExecuted = 0;

      document.addEventListener("mousemove", (e) => {
        // Throttle the function to improve performance
        const now = Date.now();
        if (now - lastExecuted < 10) return; // Only run every 10ms
        lastExecuted = now;

        // Calculate mouse position as percentage of viewport size
        const x = (e.clientX / window.innerWidth) * 100;
        const y = (e.clientY / window.innerHeight) * 100;

        // Update CSS variables with percentages
        document.documentElement.style.setProperty("--mouseX", x + "%");
        document.documentElement.style.setProperty("--mouseY", y + "%");
      });

      function populateHero(data) {
        if (!data.personal) return;

        const heroContainer = document.querySelector(".hero .container");
        if (!heroContainer) return;

        // Clear existing content
        heroContainer.innerHTML = "";

        // If image URL exists, add the image
        if (data.personal.image) {
          const imageContainer = document.createElement("div");
          imageContainer.className = "hero-image-container";
          const image = document.createElement("img");
          image.src = data.personal.image;
          image.alt = data.personal.name || "Profile Picture";
          image.className = "hero-image";
          imageContainer.appendChild(image);
          heroContainer.appendChild(imageContainer);
        }

        // Add title
        const title = document.createElement("h1");
        title.textContent = data.personal.title;
        heroContainer.appendChild(title);

        // Add description
        const description = document.createElement("p");
        description.textContent = data.personal.description;
        heroContainer.appendChild(description);

        // Add about
        const about = document.createElement("p");
        about.textContent = data.personal.about;
        heroContainer.appendChild(about);

        // Add social links
        const socialLinks = document.createElement("div");
        socialLinks.className = "social-links";

        // GitHub
        if (data.personal.social.github) {
          const github = document.createElement("a");
          github.href = data.personal.social.github;
          github.target = "_blank";
          github.title = "GitHub";
          github.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>`;
          socialLinks.appendChild(github);
        }

        // LinkedIn
        if (data.personal.social.linkedin) {
          const linkedin = document.createElement("a");
          linkedin.href = data.personal.social.linkedin;
          linkedin.target = "_blank";
          linkedin.title = "LinkedIn";
          linkedin.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>`;
          socialLinks.appendChild(linkedin);
        }

        // LeetCode
        if (data.personal.social.leetcode) {
          const leetcode = document.createElement("a");
          leetcode.href = data.personal.social.leetcode;
          leetcode.target = "_blank";
          leetcode.title = "LeetCode";
          leetcode.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M22,14.355c0-0.742-0.564-1.346-1.26-1.346H10.676c-0.696,0-1.26,0.604-1.26,1.346s0.563,1.346,1.26,1.346H20.74C21.436,15.701,22,15.098,22,14.355z"/><path d="M3.482,18.187l4.313,4.361C8.768,23.527,10.113,24,11.598,24c1.485,0,2.83-0.512,3.805-1.494l2.588-2.637c0.51-0.514,0.492-1.365-0.039-1.9c-0.531-0.535-1.375-0.553-1.884-0.039l-2.676,2.607c-0.462,0.467-1.102,0.662-1.809,0.662s-1.346-0.195-1.81-0.662l-4.298-4.363c-0.463-0.467-0.696-1.15-0.696-1.863c0-0.713,0.233-1.357,0.696-1.824l4.285-4.38c0.464-0.467,1.103-0.664,1.81-0.664s1.346,0.197,1.809,0.664l2.676,2.606c0.51,0.515,1.354,0.497,1.885-0.038c0.531-0.536,0.549-1.387,0.039-1.901l-2.588-2.636C14.43,2.027,13.084,1.5,11.6,1.5s-2.83,0.528-3.803,1.494L3.482,7.372C2.509,8.337,2,9.744,2,11.244S2.509,14.152,3.482,18.187z"/></svg>`;
          socialLinks.appendChild(leetcode);
        }

        heroContainer.appendChild(socialLinks);
      }

      function createSection(title, items) {
        const section = document.createElement("section");
        section.className = "mb-4";
        section.innerHTML = `<h2 class="fadeInUp fw-bold position-relative pb-3 mb-4">${title}</h2>`;

        if (Array.isArray(items)) {
          const list = document.createElement("ul");
          list.className = "list-group list-group-flush";
          list.innerHTML = items.map((item) => `<li class="list-group-item border-0 bg-transparent">${item}</li>`).join("");
          section.appendChild(list);
        } else {
          const paragraph = document.createElement("p");
          paragraph.className = "lead";
          paragraph.textContent = items;
          section.innerHTML += paragraph.outerHTML;
        }

        const hr = document.createElement("hr");
        hr.className = "my-4";
        section.appendChild(hr);
        return section;
      }

      function createSkillsSection(skills) {
        const section = document.createElement("section");
        section.innerHTML = `<h2 class="fadeInUp">Skills</h2>`;

        const grid = document.createElement("div");
        grid.className = "skills-grid";

        skills.forEach((skill, i) => {
          const item = document.createElement("div");
          item.className = "skill-item stagger-item";

          setTimeout(
            () => (item.style.animation = `fadeInUp ${0.5}s ease-out forwards`),
            100 * i
          );

          item.innerHTML = `
            <div class="skill-header">
              <div class="skill-name">${skill.name}</div>
              <div class="skill-level">${skill.level}</div>
            </div>
            <div class="skill-bar">
              <div class="skill-progress"></div>
            </div>
          `;

          const observer = new IntersectionObserver(
            (entries) => {
              if (entries[0].isIntersecting) {
                item
                  .querySelector(".skill-progress")
                  .classList.add(skill.level.toLowerCase());
                observer.disconnect();
              }
            },
            { threshold: 0.2 }
          );

          observer.observe(item);
          grid.appendChild(item);
        });

        section.appendChild(grid);
        return section;
      }

      function createExperienceSection(items) {
        const section = document.createElement("section");
        const heading = document.createElement("h2");
        heading.textContent = "Professional Experience";
        heading.className = "fadeInUp";
        section.appendChild(heading);

        items.forEach((exp, index) => {
          const cardDiv = document.createElement("div");
          cardDiv.className = "card my-3 stagger-item";
          setTimeout(() => {
            cardDiv.style.animation = `fadeInUp ${0.5}s ease-out forwards`;
          }, 100 * index);
          const cardBody = document.createElement("div");
          cardBody.className = "card-body";
          const role = document.createElement("h5");
          role.textContent = exp.role;
          cardBody.appendChild(role);

          if (exp.details && exp.details.length > 0) {
            const detailList = document.createElement("ul");
            exp.details.forEach((detail) => {
              const li = document.createElement("li");
              li.textContent = detail;
              detailList.appendChild(li);
            });
            cardBody.appendChild(detailList);
          }
          cardDiv.appendChild(cardBody);
          section.appendChild(cardDiv);
        });

        const hr = document.createElement("hr");
        section.appendChild(hr);
        return section;
      }

      function createProjectsSection(projects) {
        const section = document.createElement("section");
        const heading = document.createElement("h2");
        heading.textContent = "Projects";
        heading.className = "fadeInUp";
        section.appendChild(heading);

        const grid = document.createElement("div");
        grid.className = "projects-grid";

        projects.forEach((proj, index) => {
          const cardProj = document.createElement("div");
          cardProj.className = "card-projects stagger-item";
          setTimeout(() => {
            cardProj.style.animation = `fadeInUp ${0.5}s ease-out forwards`;
          }, 100 * index);

          // Handle string-based projects
          if (typeof proj === "string") {
            const content = document.createElement("div");
            content.className = "project-content";
            const title = document.createElement("h5");
            title.className = "project-title";
            title.textContent = proj;
            content.appendChild(title);
            cardProj.appendChild(content);
          } else {
            // Handle object-based projects
            // Create image carousel if images exist
            if (proj.coverImage || (proj.images && proj.images.length)) {
              const carousel = document.createElement("div");
              carousel.className = "project-carousel";

              const carouselInner = document.createElement("div");
              carouselInner.className = "project-carousel-inner";

              // Process images
              const images =
                proj.images || (proj.coverImage ? [proj.coverImage] : []);

              if (images.length > 0) {
                // Add all images to carousel
                images.forEach((img, imgIndex) => {
                  const item = document.createElement("div");
                  item.className = "project-carousel-item";
                  item.dataset.index = imgIndex;

                  const imgEl = document.createElement("img");
                  imgEl.src = img;
                  imgEl.alt = `${proj.title || "Project"} image ${
                    imgIndex + 1
                  }`;
                  imgEl.className = "project-image";

                  item.appendChild(imgEl);
                  carouselInner.appendChild(item);
                });

                // Add controls if multiple images
                if (images.length > 1) {
                  // Add previous button
                  const prevBtn = document.createElement("button");
                  prevBtn.className = "carousel-prev";
                  prevBtn.innerHTML = "&#10094;";
                  prevBtn.addEventListener("click", function (e) {
                    e.stopPropagation();
                    navigateCarousel(carousel, -1);
                  });
                  carousel.appendChild(prevBtn);

                  // Add next button
                  const nextBtn = document.createElement("button");
                  nextBtn.className = "carousel-next";
                  nextBtn.innerHTML = "&#10095;";
                  nextBtn.addEventListener("click", function (e) {
                    e.stopPropagation();
                    navigateCarousel(carousel, 1);
                  });
                  carousel.appendChild(nextBtn);

                  // Add indicators
                  const indicators = document.createElement("div");
                  indicators.className = "carousel-controls";

                  images.forEach((_, imgIndex) => {
                    const dot = document.createElement("div");
                    dot.className =
                      "carousel-indicator" + (imgIndex === 0 ? " active" : "");
                    dot.dataset.index = imgIndex;
                    dot.addEventListener("click", function (e) {
                      e.stopPropagation();
                      goToSlide(carousel, imgIndex);
                    });
                    indicators.appendChild(dot);
                  });

                  carousel.appendChild(indicators);

                  // Add swipe functionality for mobile
                  addSwipeListeners(carousel);
                }

                carousel.appendChild(carouselInner);
                cardProj.appendChild(carousel);
              }
            }

            // Project content (title, tech badges, description)
            const content = document.createElement("div");
            content.className = "project-content";

            // Project title
            const title = document.createElement("h5");
            title.className = "project-title";
            title.textContent = proj.title;
            content.appendChild(title);

            // Technology badges
            if (proj.technologies) {
              const techContainer = document.createElement("div");
              techContainer.className = "tech-badges";

              const techs = proj.technologies.split(",");
              techs.forEach((tech) => {
                const badge = document.createElement("span");
                badge.className = "tech-badge";
                badge.textContent = tech.trim();
                techContainer.appendChild(badge);
              });

              content.appendChild(techContainer);
            }

            // Project description
            if (proj.description) {
              const desc = document.createElement("p");
              desc.className = "project-description";
              desc.textContent = proj.description;
              content.appendChild(desc);
            }

            // Add GitHub button if repository URL is available
            if (proj.github) {
              const githubLink = document.createElement("a");
              githubLink.href = proj.github;
              githubLink.className = "github-btn";
              githubLink.target = "_blank";
              githubLink.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
                View on GitHub
              `;
              content.appendChild(githubLink);
            }

            cardProj.appendChild(content);
          }

          grid.appendChild(cardProj);
        });

        section.appendChild(grid);
        return section;
      }

      function createCertificationsSection(certifications) {
        const section = document.createElement("section");
        const heading = document.createElement("h2");
        heading.textContent = "Certifications & Achievements";
        heading.className = "fadeInUp";
        section.appendChild(heading);

        const grid = document.createElement("div");
        grid.className = "certifications-grid";

        certifications.forEach((cert, index) => {
          // Support both old string format and new object format
          const isObjectFormat = typeof cert === "object";

          const certCard = document.createElement("div");
          certCard.className = "cert-card stagger-item";
          setTimeout(() => {
            certCard.style.animation = `fadeInUp ${0.5}s ease-out forwards`;
          }, 100 * index);

          // Add certificate image if available
          const imageContainer = document.createElement("div");
          imageContainer.className = "cert-image-container";

          if (isObjectFormat && cert.image) {
            const img = document.createElement("img");
            img.src = cert.image;
            img.alt = cert.title || "Certificate";
            img.className = "cert-image";
            imageContainer.appendChild(img);
          } else {
            // Add a placeholder icon/graphic when no image is available
            const placeholderSvg = `<svg class="cert-placeholder-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 15l-3-3m0 0l3-3m-3 3h8M5 3h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2z" />
            </svg>`;
            imageContainer.innerHTML = placeholderSvg;
          }

          certCard.appendChild(imageContainer);

          const certContent = document.createElement("div");
          certContent.className = "cert-content";

          const title = document.createElement("div");
          title.className = "cert-title";

          if (isObjectFormat) {
            title.textContent = cert.title || "";
            if (cert.achievement) {
              title.textContent += ` (${cert.achievement})`;
            }
          } else {
            // Handle the old string format for backward compatibility
            title.textContent = cert;
          }

          certContent.appendChild(title);

          // Add issuer if available
          if (isObjectFormat && cert.issuer) {
            const issuer = document.createElement("div");
            issuer.className = "cert-issuer";
            issuer.textContent = cert.issuer;
            certContent.appendChild(issuer);
          }

          // Add date if available
          if (isObjectFormat && cert.date) {
            const date = document.createElement("div");
            date.className = "cert-date";
            date.textContent = cert.date;
            certContent.appendChild(date);
          }

          certCard.appendChild(certContent);
          grid.appendChild(certCard);
        });

        section.appendChild(grid);
        return section;
      }

      function createEducationSection(educationItems) {
        const section = document.createElement("section");
        const heading = document.createElement("h2");
        heading.textContent = "Education";
        heading.className = "fadeInUp";
        section.appendChild(heading);

        const grid = document.createElement("div");
        grid.className = "education-grid";

        educationItems.forEach((edu, index) => {
          // Support both old string format and new object format
          const isObjectFormat = typeof edu === "object";

          const eduCard = document.createElement("div");
          eduCard.className = "education-card stagger-item";
          setTimeout(() => {
            eduCard.style.animation = `fadeInUp ${0.5}s ease-out forwards`;
          }, 100 * index);

          // Logo or initial
          const logoDiv = document.createElement("div");
          logoDiv.className = "education-logo";

          if (isObjectFormat && edu.logo) {
            const img = document.createElement("img");
            img.src = edu.logo;
            img.alt = edu.institution || "Institution logo";
            logoDiv.appendChild(img);
          } else if (isObjectFormat) {
            // Use the first letter of institution as a placeholder
            logoDiv.textContent = (edu.institution || "E").charAt(0);
          } else {
            // For string format, extract the institution initial if possible
            const match = edu.match(/\((.*?),/);
            logoDiv.textContent = match ? match[1].charAt(0) : "E";
          }

          eduCard.appendChild(logoDiv);

          // Education content
          const content = document.createElement("div");
          content.className = "education-content";

          if (isObjectFormat) {
            // Degree
            const degree = document.createElement("div");
            degree.className = "education-degree";
            degree.textContent = edu.degree || "";
            content.appendChild(degree);

            // Institution
            const institution = document.createElement("div");
            institution.className = "education-institution";
            institution.textContent = edu.institution || "";
            content.appendChild(institution);

            // Duration with calendar icon
            const duration = document.createElement("div");
            duration.className = "education-date";
            duration.innerHTML = `
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
              ${edu.duration || ""}
            `;
            content.appendChild(duration);

            // Location with pin icon
            if (edu.location) {
              const location = document.createElement("div");
              location.className = "education-location";
              location.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                </svg>
                ${edu.location}
              `;
              content.appendChild(location);
            }
          } else {
            // Handle the old string format
            const eduInfo = document.createElement("div");
            eduInfo.className = "education-degree";
            eduInfo.textContent = edu;
            content.appendChild(eduInfo);
          }

          eduCard.appendChild(content);
          grid.appendChild(eduCard);
        });

        section.appendChild(grid);
        return section;
      }

      // Carousel navigation functions
      function navigateCarousel(carousel, direction) {
        const inner = carousel.querySelector(".project-carousel-inner");
        const items = carousel.querySelectorAll(".project-carousel-item");
        const indicators = carousel.querySelectorAll(".carousel-indicator");

        if (!inner || items.length <= 1) return;

        // Get current active index
        const activeIndex = parseInt(inner.dataset.activeIndex || 0);

        // Calculate new index
        let newIndex = activeIndex + direction;
        if (newIndex < 0) newIndex = items.length - 1;
        if (newIndex >= items.length) newIndex = 0;

        // Navigate to new slide
        goToSlide(carousel, newIndex);
      }

      function goToSlide(carousel, index) {
        const inner = carousel.querySelector(".project-carousel-inner");
        const items = carousel.querySelectorAll(".project-carousel-item");
        const indicators = carousel.querySelectorAll(".carousel-indicator");

        if (!inner || items.length <= 1) return;

        // Update active index
        inner.dataset.activeIndex = index;

        // Update transform
        inner.style.transform = `translateX(-${index * 100}%)`;

        // Update indicators
        indicators.forEach((indicator, i) => {
          if (i === index) {
            indicator.classList.add("active");
          } else {
            indicator.classList.remove("active");
          }
        });
      }

      // Add touch swipe functionality for mobile
      function addSwipeListeners(element) {
        let startX, startY, endX, endY;
        const minSwipeDistance = 50;

        element.addEventListener(
          "touchstart",
          function (e) {
            startX = e.changedTouches[0].screenX;
            startY = e.changedTouches[0].screenY;
          },
          false
        );

        element.addEventListener(
          "touchend",
          function (e) {
            endX = e.changedTouches[0].screenX;
            endY = e.changedTouches[0].screenY;

            // Determine horizontal swipe
            const diffX = startX - endX;
            const diffY = Math.abs(startY - endY);

            // Only respond to horizontal swipes
            if (diffY < 50) {
              if (Math.abs(diffX) > minSwipeDistance) {
                if (diffX > 0) {
                  // Swipe left, go next
                  navigateCarousel(element, 1);
                } else {
                  // Swipe right, go previous
                  navigateCarousel(element, -1);
                }
              }
            }
          },
          false
        );
      }

      function createPortfolioSections(data) {
        const container = document.getElementById("dynamicContent");
        if (!container) return;

        if (data.summary) {
          container.appendChild(createSection("Summary", data.summary));
        }

        if (data.experience && data.experience.length) {
          container.appendChild(createExperienceSection(data.experience));
        }

        if (data.projects && data.projects.length) {
          container.appendChild(createProjectsSection(data.projects));
        }

        if (data.certifications && data.certifications.length) {
          // Use the new dedicated function instead of the generic createSection
          container.appendChild(
            createCertificationsSection(data.certifications)
          );
        }

        if (data.skills && data.skills.length) {
          container.appendChild(createSkillsSection(data.skills));
        }

        if (data.education && data.education.length) {
          // Use the dedicated education section creator instead of the generic one
          container.appendChild(createEducationSection(data.education));
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        populateHero(portfolioData);
        createPortfolioSections(portfolioData);
      });
    </script>
  </body>
</html>
